<?xml version="1.0"?>
<launch>
    <arg name="gui" default="false" />
    <arg name="rviz" default="true" />

    <param name="ROBOT_NAME" value="$(env ROBOT_NAME)"/>
    <param name="ROBOT_SDF_FILE" value="$(find robot_fleet)/static_models_w_plugin/spot/model.sdf"/>
    
    <arg name="ROSBRIDGE_STATE" value="$(env ROSBRIDGE_STATE)" />
    <param name="ROSBRIDGE_STATE" value="$(env ROSBRIDGE_STATE)"/>
    <param name="ROSBRIDGE_IP" value="$(env ROSBRIDGE_IP)" />

    <param name="use_custom_move_object_gazebo_plugin" value="$(optenv USE_CUSTOM_MOVE_OBJECT_GAZEBO_PLUGIN false)" />

    <group if="$(eval ROSBRIDGE_STATE=='SERVER')" >
        <param name="ROSBRIDGE_IP" value="localhost"/>
        <include file="$(find rosbridge_server)/launch/rosbridge_websocket.launch" />
    </group>
    
    <!-- Launch robot_fleet specific nodes -->
    <node name="gazebo_model_mover" pkg="robot_fleet" type="gazebo_model_mover.py" />
    <node name="client_rosbridge" pkg="robot_fleet" type="client_rosbridge.py" />

    <include output="screen" file="$(find rs_config)/launch/gazebo.launch" >
    </include>

    <!-- Launch the world -->
    <!--<include output="screen" file="$(find aws_robomaker_small_warehouse_world)/launch/small_warehouse.launch" >-->
    <!--</include>-->

    <!-- Run the map server -->
    <!--<arg name="map_file" default="$(find aws_robomaker_small_warehouse_world)/maps/005/map.yaml"/>-->
    <!--<node name="map_server" pkg="map_server" type="map_server" args="$(arg map_file)" />-->

    <!--- Run AMCL -->
    <!--<include output="screen" file="$(find robot_fleet)/launch/include/amcl.launch"/>-->

    <!--- Run Move Base -->
    <!--<include file="$(find robot_fleet)/launch/include/move_base.launch" />-->

    <!--- Run Rviz -->
    <!--<node pkg="rviz" type="rviz" name="rviz" output="screen" args="-d $(find robot_fleet)/rviz/basic_data.rviz" if="$(arg rviz)"/>-->

</launch>
